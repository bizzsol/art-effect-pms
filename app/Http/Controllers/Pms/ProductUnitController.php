<?php
bolt_decrypt( __FILE__ , '9GOxiP'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcUG1zOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBBcHBcTW9kZWxzXFBtc01vZGVsc1xQcm9kdWN0VW5pdDsKdXNlIEFwcFxNb2RlbHNcUG1zTW9kZWxzXFByb2R1Y3RVbml0TWF0cml4Owp1c2UgSWxsdW1pbmF0ZVxIdHRwXFJlcXVlc3Q7CnVzZSBEYXRhVGFibGVzLCBEQjsKCmNsYXNzIFByb2R1Y3RVbml0Q29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIKeyAgIAoKICAgIHB1YmxpYyBmdW5jdGlvbiBoZWFkZXJDb2x1bW5zKCR2YWx1ZT0nJykKICAgIHsKICAgICAgICAkcm93ID0gYXJyYXkoCiAgICAgICAgICAgIFsnU0wnLCAnU0wnXSwgCiAgICAgICAgICAgIFsndW5pdF9jb2RlJywgJ3VuaXRfY29kZScsICd0ZXh0LWNlbnRlciddLAogICAgICAgICAgICBbJ3VuaXRfbmFtZScsICd1bml0X25hbWUnLCAndGV4dC1jZW50ZXInXSwKICAgICAgICAgICAgWydyb3VuZF9wb2xpY3knLCAncm91bmRfcG9saWN5JywgJ3RleHQtY2VudGVyJ10sCiAgICAgICAgICAgIFsnc3RhdHVzJywgJ3N0YXR1cycsICd0ZXh0LWNlbnRlciddLCAKICAgICAgICAgICAgWydhY3Rpb25zJywgJ2FjdGlvbnMnLCAndGV4dC1jZW50ZXInLCd3aWR0aDoxNSUnXQogICAgICAgICk7CiAgICAgICAgcmV0dXJuICRyb3c7CiAgICB9CiAgICAvKioKICAgICAqIERpc3BsYXkgYSBsaXN0aW5nIG9mIHRoZSByZXNvdXJjZS4KICAgICAqCiAgICAgKiBAcmV0dXJuIFxJbGx1bWluYXRlXEh0dHBcUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGluZGV4KCkKICAgIHsKICAgICAgICB0cnkgewogICAgICAgICAgICAkdGl0bGUgPSAnUHJvZHVjdCBVbml0JzsKICAgICAgICAgICAgJHN0YXR1cz1zdGF0dXMoKTsKICAgICAgICAgICAgJHByZWZpeD0nUFUtJy5kYXRlKCd5Jywgc3RydG90aW1lKGRhdGUoJ1ktbS1kJykpKS4nLU1CTS0nOwogICAgICAgICAgICAkdW5pdF9jb2RlPXVuaXF1ZUNvZGUoMTQsJHByZWZpeCwncHJvZHVjdF91bml0cycsJ2lkJyk7CiAgICAgICAgICAgICRoZWFkZXJDb2x1bW5zPSR0aGlzLT5oZWFkZXJDb2x1bW5zKCk7CiAgICAgICAgICAgICRwcm9kdWN0X3VuaXRzID0gUHJvZHVjdFVuaXQ6OndoZW4oIWRhdGF0YWJsZU9yZGVyaW5nKCksIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT5vcmRlcmJ5KCdpZCcsICdkZXNjJyk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKHJlcXVlc3QoKS0+YWpheCgpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERhdGF0YWJsZXM6Om9mKCRwcm9kdWN0X3VuaXRzKQogICAgICAgICAgICAgICAgICAgIC0+YWRkSW5kZXhDb2x1bW4oKQogICAgICAgICAgICAgICAgICAgIC0+ZWRpdENvbHVtbignc3RhdHVzJywgZnVuY3Rpb24oJHVuaXQpewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdWNmaXJzdCgkdW5pdC0+c3RhdHVzKTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC0+ZWRpdENvbHVtbigncm91bmRfcG9saWN5JywgZnVuY3Rpb24oJHVuaXQpewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzxzdHJvbmc+Jy5yb3VuZFBvbGljaWVzKClbJHVuaXQtPnJvdW5kX3BvbGljeV1bJ3RpdGxlJ10uJzwvc3Ryb25nPjxicj4nLnJvdW5kUG9saWNpZXMoKVskdW5pdC0+cm91bmRfcG9saWN5XVsnZGVzY3JpcHRpb24nXTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC0+YWRkQ29sdW1uKCdhY3Rpb25zJywgZnVuY3Rpb24oJHVuaXQpewogICAgICAgICAgICAgICAgICAgICAgICAkYWN0aW9ucyA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAkYWN0aW9ucy49JzxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgb25jbGljaz0idW5pdENvbnZlcnNpb25zKCQodGhpcykpIiBkYXRhLXVuaXQtaWQ9IicuJHVuaXQtPmlkLiciIGNsYXNzPSJidG4gYnRuLXN1Y2Nlc3MgYnRuLXhzIG1yLTEiPlVuaXQgQ29udmVyc2lvbnM8L2E+JzsKICAgICAgICAgICAgICAgICAgICAgICAgJGFjdGlvbnMuPSc8YSBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCkiIGRhdGEtcm9sZT0icHV0IiBkYXRhLXNyYz0iJy5yb3V0ZSgncG1zLnByb2R1Y3QtbWFuYWdlbWVudC5wcm9kdWN0LXVuaXQuc2hvdycsICR1bml0LT5pZCkuJyIgb25jbGljaz0iZWRpdEJ0bigkKHRoaXMpKSIgY2xhc3M9ImJ0biBidG4taW5mbyBidG4teHMgbXItMSBlZGl0QnRuIj48aSBjbGFzcz0ibGFzIGxhLWVkaXQiPjwvaT48L2E+JzsKICAgICAgICAgICAgICAgICAgICAgICAgJGFjdGlvbnMuPSc8YSBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCkiIGRhdGEtcm9sZT0iZGVsZXRlIiBvbmNsaWNrPSJkZWxldGVCdG4oJCh0aGlzKSkiIGRhdGEtc3JjPSInLnJvdXRlKCdwbXMucHJvZHVjdC1tYW5hZ2VtZW50LnByb2R1Y3QtdW5pdC5kZXN0cm95JywgJHVuaXQtPmlkKS4nIiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIgYnRuLXhzIG1yLTEgZGVsZXRlQnRuIj48aSBjbGFzcz0ibGFzIGxhLXRyYXNoIj48L2k+PC9hPic7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkYWN0aW9uczsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC0+cmF3Q29sdW1ucyhbJ3JvdW5kX3BvbGljeScsICdhY3Rpb25zJ10pCiAgICAgICAgICAgICAgICAgICAgLT5tYWtlKHRydWUpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHZpZXcoJ3Btcy5iYWNrZW5kLnBhZ2VzLnByb2R1Y3QtdW5pdC5pbmRleCcsIGNvbXBhY3QoJ3RpdGxlJywgJ2hlYWRlckNvbHVtbnMnLCdzdGF0dXMnLCd1bml0X2NvZGUnKSk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+YmFja1dpdGhFcnJvcigkdGgtPmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogU2hvdyB0aGUgZm9ybSBmb3IgY3JlYXRpbmcgYSBuZXcgcmVzb3VyY2UuCiAgICAgKgogICAgICogQHJldHVybiBcSWxsdW1pbmF0ZVxIdHRwXFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBjcmVhdGUoKQogICAgewogICAgICAgIC8vCiAgICB9CgogICAgLyoqCiAgICAgKiBTdG9yZSBhIG5ld2x5IGNyZWF0ZWQgcmVzb3VyY2UgaW4gc3RvcmFnZS4KICAgICAqCiAgICAgKiBAcGFyYW0gIFxJbGx1bWluYXRlXEh0dHBcUmVxdWVzdCAgJHJlcXVlc3QKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gc3RvcmUoUmVxdWVzdCAkcmVxdWVzdCkKICAgIHsKICAgICAgICAkdGhpcy0+dmFsaWRhdGUoJHJlcXVlc3QsIFsKICAgICAgICAgICAgJ3VuaXRfbmFtZScgPT4gWydyZXF1aXJlZCcsICdzdHJpbmcnLCAnbWF4OjI1NSddLAogICAgICAgICAgICAndW5pdF9jb2RlJyA9PiBbJ3JlcXVpcmVkJywgJ3N0cmluZycsICdtYXg6MjU1J10sCiAgICAgICAgICAgICdyb3VuZF9wb2xpY3knID0+IFsncmVxdWlyZWQnLCAnc3RyaW5nJywgJ21heDoyNTUnXSwKICAgICAgICAgICAgJ3N0YXR1cycgPT4gWydyZXF1aXJlZCcsICdzdHJpbmcnLCAnbWF4OjI1NSddLAogICAgICAgIF0pOwoKICAgICAgICB0cnkgewoKICAgICAgICAgICAgJGlucHV0cyA9ICRyZXF1ZXN0LT5hbGwoKTsKICAgICAgICAgICAgdW5zZXQoJGlucHV0c1snX3Rva2VuJ10pOwogICAgICAgICAgICB1bnNldCgkaW5wdXRzWydfbWV0aG9kJ10pOwogICAgICAgICAgICAKICAgICAgICAgICAgJHByb2R1Y3RVbml0ID0gUHJvZHVjdFVuaXQ6OmNyZWF0ZSgkaW5wdXRzKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+YmFja1dpdGhTdWNjZXNzKCdQcm9kdWN0IFVuaXQgaGFzIGJlZW4gYWRkZWQgc3VjY2Vzc2Z1bGx5Jyk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+YmFja1dpdGhFcnJvcigkdGgtPmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogRGlzcGxheSB0aGUgc3BlY2lmaWVkIHJlc291cmNlLgogICAgICoKICAgICAqIEBwYXJhbSAgXEFwcFxQcm9kdWN0VW5pdCAgJHByb2R1Y3RVbml0CiAgICAgKiBAcmV0dXJuIFxJbGx1bWluYXRlXEh0dHBcUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHNob3coUHJvZHVjdFVuaXQgJHByb2R1Y3RVbml0KQogICAgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgICRwcm9kdWN0VW5pdC0+c3JjID0gcm91dGUoJ3Btcy5wcm9kdWN0LW1hbmFnZW1lbnQucHJvZHVjdC11bml0LnVwZGF0ZScsJHByb2R1Y3RVbml0LT5pZCk7CiAgICAgICAgICAgICRwcm9kdWN0VW5pdC0+cmVxX3R5cGUgPSAncHV0JzsKICAgICAgICAgICAgCiAgICAgICAgICAgICRkYXRhID0gWwogICAgICAgICAgICAgICAgJ3N0YXR1cycgPT4gJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgJ2luZm8nID0+ICRwcm9kdWN0VW5pdAogICAgICAgICAgICBdOwoKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oJGRhdGEpOwogICAgICAgIH1jYXRjaCAoXFRocm93YWJsZSAkdGgpewogICAgICAgICAgICAkZGF0YSA9IFsKICAgICAgICAgICAgICAgICdzdGF0dXMnID0+IG51bGwsCiAgICAgICAgICAgICAgICAnaW5mbycgPT4gJHRoLT5nZXRNZXNzYWdlKCkKICAgICAgICAgICAgXTsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oJGRhdGEpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgc3BlY2lmaWVkIHJlc291cmNlIGluIHN0b3JhZ2UuCiAgICAgKgogICAgICogQHBhcmFtICBcSWxsdW1pbmF0ZVxIdHRwXFJlcXVlc3QgICRyZXF1ZXN0CiAgICAgKiBAcGFyYW0gIFxBcHBcUHJvZHVjdFVuaXQgICRwcm9kdWN0VW5pdAogICAgICogQHJldHVybiBcSWxsdW1pbmF0ZVxIdHRwXFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiB1cGRhdGUoUmVxdWVzdCAkcmVxdWVzdCwgUHJvZHVjdFVuaXQgJHByb2R1Y3RVbml0KQogICAgewogICAgICAgICR0aGlzLT52YWxpZGF0ZSgkcmVxdWVzdCwgWwogICAgICAgICAgICAndW5pdF9uYW1lJyA9PiBbJ3JlcXVpcmVkJywgJ3N0cmluZycsICdtYXg6MjU1J10sCiAgICAgICAgICAgICd1bml0X2NvZGUnID0+IFsncmVxdWlyZWQnLCAnc3RyaW5nJywgJ21heDoyNTUnXSwKICAgICAgICAgICAgJ3JvdW5kX3BvbGljeScgPT4gWydyZXF1aXJlZCcsICdzdHJpbmcnLCAnbWF4OjI1NSddLAogICAgICAgICAgICAnc3RhdHVzJyA9PiBbJ3JlcXVpcmVkJywgJ3N0cmluZycsICdtYXg6MjU1J10sCiAgICAgICAgXSk7CgogICAgICAgIHRyeSB7CiAgICAgICAgIAogICAgICAgICAgICAkaW5wdXRzID0gJHJlcXVlc3QtPmFsbCgpOwogICAgICAgICAgICB1bnNldCgkaW5wdXRzWydfdG9rZW4nXSk7CiAgICAgICAgICAgIHVuc2V0KCRpbnB1dHNbJ19tZXRob2QnXSk7CgogICAgICAgICAgICAkcHJvZHVjdFVuaXQtPnVwZGF0ZSgkaW5wdXRzKTsKCiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+YmFja1dpdGhTdWNjZXNzKCdQcm9kdWN0IFVuaXQgaGFzIGJlZW4gdXBkYXRlZCBzdWNjZXNzZnVsbHknKTsKICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5iYWNrV2l0aEVycm9yKCR0aC0+Z2V0TWVzc2FnZSgpKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZW1vdmUgdGhlIHNwZWNpZmllZCByZXNvdXJjZSBmcm9tIHN0b3JhZ2UuCiAgICAgKgogICAgICogQHBhcmFtICBcQXBwXFByb2R1Y3RVbml0ICAkcHJvZHVjdFVuaXQKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZGVzdHJveShQcm9kdWN0VW5pdCAkcHJvZHVjdFVuaXQpCiAgICB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJHByb2R1Y3RVbml0LT5kZWxldGUoKTsKICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oJHRoLT5nZXRNZXNzYWdlKCkpOwogICAgICAgIH0KICAgIH0KCgogICAgcHVibGljIGZ1bmN0aW9uIHVuaXRDb252ZXJzaW9ucygkaWQpCiAgICB7CiAgICAgICAgcmV0dXJuIHZpZXcoJ3Btcy5iYWNrZW5kLnBhZ2VzLnByb2R1Y3QtdW5pdC51bml0LWNvbnZlcnNpb25zJywgWwogICAgICAgICAgICAndW5pdCcgPT4gUHJvZHVjdFVuaXQ6OndpdGgoWwogICAgICAgICAgICAgICAgJ21hdHJpeGVzJwogICAgICAgICAgICBdKS0+ZmluZE9yRmFpbCgkaWQpLAogICAgICAgICAgICAndW5pdHMnID0+IFByb2R1Y3RVbml0Ojp3aGVyZSgnaWQnLCAnIT0nLCAkaWQpLT5nZXQoKSwKICAgICAgICBdKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gdXBkYXRlVW5pdENvbnZlcnNpb25zKFJlcXVlc3QgJHJlcXVlc3QsICRpZCkKICAgIHsKICAgICAgICBEQjo6YmVnaW5UcmFuc2FjdGlvbigpOwogICAgICAgIHRyeXsKICAgICAgICAgICAgJHVuaXRzID0gUHJvZHVjdFVuaXQ6OndoZXJlKCdpZCcsICchPScsICRpZCktPmdldCgpOwogICAgICAgICAgICBpZihpc3NldCgkdW5pdHNbMF0pKXsKICAgICAgICAgICAgICAgIGZvcmVhY2goJHVuaXRzIGFzICR1bml0KXsKICAgICAgICAgICAgICAgICAgICBQcm9kdWN0VW5pdE1hdHJpeDo6dXBkYXRlT3JDcmVhdGUoWwogICAgICAgICAgICAgICAgICAgICAgICAncHJvZHVjdF91bml0X2lkJyA9PiAkaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICdjb252ZXJzaW9uX3VuaXRfaWQnID0+ICR1bml0LT5pZAogICAgICAgICAgICAgICAgICAgIF0sIFsKICAgICAgICAgICAgICAgICAgICAgICAgJ2NvbnZlcnNpb25fcmF0ZScgPT4gaXNzZXQoJHJlcXVlc3QtPnVuaXRzWyR1bml0LT5pZF0pICYmICRyZXF1ZXN0LT51bml0c1skdW5pdC0+aWRdID49IDAgPyAkcmVxdWVzdC0+dW5pdHNbJHVuaXQtPmlkXSA6IDAsCiAgICAgICAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIERCOjpjb21taXQoKTsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IHRydWUsCiAgICAgICAgICAgICAgICAnbWVzc2FnZScgPT4gIlVuaXQgQ29udmVyc2lvbnMgaGFzIGJlZW4gdXBkYXRlZCBzdWNjZXNzZnVsbHkuIgogICAgICAgICAgICBdKTsKICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgREI6OnJvbGxiYWNrKCk7CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiBmYWxzZSwKICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAkdGgtPmdldE1lc3NhZ2UoKQogICAgICAgICAgICBdKTsKICAgICAgICB9CiAgICB9Cn0K