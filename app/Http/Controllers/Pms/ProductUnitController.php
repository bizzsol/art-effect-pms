<?php
bolt_decrypt( __FILE__ , 'WpV0Kh'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcUG1zOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBBcHBcTW9kZWxzXFBtc01vZGVsc1xQcm9kdWN0VW5pdDsKdXNlIEFwcFxNb2RlbHNcUG1zTW9kZWxzXFByb2R1Y3RVbml0TWF0cml4Owp1c2UgSWxsdW1pbmF0ZVxIdHRwXFJlcXVlc3Q7CnVzZSBEYXRhVGFibGVzLCBEQjsKCmNsYXNzIFByb2R1Y3RVbml0Q29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIKeyAgIAoKICAgIHB1YmxpYyBmdW5jdGlvbiBoZWFkZXJDb2x1bW5zKCR2YWx1ZT0nJykKICAgIHsKICAgICAgICAkcm93ID0gYXJyYXkoCiAgICAgICAgICAgIFsnU0wnLCAnU0wnXSwgCiAgICAgICAgICAgIFsndW5pdF9jb2RlJywgJ3VuaXRfY29kZScsICd0ZXh0LWNlbnRlciddLAogICAgICAgICAgICBbJ3VuaXRfbmFtZScsICd1bml0X25hbWUnLCAndGV4dC1jZW50ZXInXSwKICAgICAgICAgICAgWydyb3VuZF9wb2xpY3knLCAncm91bmRfcG9saWN5JywgJ3RleHQtY2VudGVyJ10sCiAgICAgICAgICAgIFsnc3RhdHVzJywgJ3N0YXR1cycsICd0ZXh0LWNlbnRlciddLCAKICAgICAgICAgICAgWydhY3Rpb25zJywgJ2FjdGlvbnMnLCAndGV4dC1jZW50ZXInLCd3aWR0aDoxNSUnXQogICAgICAgICk7CiAgICAgICAgcmV0dXJuICRyb3c7CiAgICB9CiAgICAvKioKICAgICAqIERpc3BsYXkgYSBsaXN0aW5nIG9mIHRoZSByZXNvdXJjZS4KICAgICAqCiAgICAgKiBAcmV0dXJuIFxJbGx1bWluYXRlXEh0dHBcUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGluZGV4KCkKICAgIHsKICAgICAgICB0cnkgewogICAgICAgICAgICAkdGl0bGUgPSAnUHJvZHVjdCBVbml0JzsKICAgICAgICAgICAgJHN0YXR1cz1zdGF0dXMoKTsKICAgICAgICAgICAgJHByZWZpeD0nUFUtJy5kYXRlKCd5Jywgc3RydG90aW1lKGRhdGUoJ1ktbS1kJykpKS4nLVNTTFotJzsKICAgICAgICAgICAgJHVuaXRfY29kZT11bmlxdWVDb2RlKDE0LCRwcmVmaXgsJ3Byb2R1Y3RfdW5pdHMnLCdpZCcpOwogICAgICAgICAgICAkaGVhZGVyQ29sdW1ucz0kdGhpcy0+aGVhZGVyQ29sdW1ucygpOwogICAgICAgICAgICAkcHJvZHVjdF91bml0cyA9IFByb2R1Y3RVbml0Ojp3aGVuKCFkYXRhdGFibGVPcmRlcmluZygpLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+b3JkZXJieSgnaWQnLCAnZGVzYycpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGlmIChyZXF1ZXN0KCktPmFqYXgoKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBEYXRhdGFibGVzOjpvZigkcHJvZHVjdF91bml0cykKICAgICAgICAgICAgICAgICAgICAtPmFkZEluZGV4Q29sdW1uKCkKICAgICAgICAgICAgICAgICAgICAtPmVkaXRDb2x1bW4oJ3N0YXR1cycsIGZ1bmN0aW9uKCR1bml0KXsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVjZmlyc3QoJHVuaXQtPnN0YXR1cyk7CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAtPmVkaXRDb2x1bW4oJ3JvdW5kX3BvbGljeScsIGZ1bmN0aW9uKCR1bml0KXsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICc8c3Ryb25nPicucm91bmRQb2xpY2llcygpWyR1bml0LT5yb3VuZF9wb2xpY3ldWyd0aXRsZSddLic8L3N0cm9uZz48YnI+Jy5yb3VuZFBvbGljaWVzKClbJHVuaXQtPnJvdW5kX3BvbGljeV1bJ2Rlc2NyaXB0aW9uJ107CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAtPmFkZENvbHVtbignYWN0aW9ucycsIGZ1bmN0aW9uKCR1bml0KXsKICAgICAgICAgICAgICAgICAgICAgICAgJGFjdGlvbnMgPSAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgJGFjdGlvbnMuPSc8YSBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCkiIG9uY2xpY2s9InVuaXRDb252ZXJzaW9ucygkKHRoaXMpKSIgZGF0YS11bml0LWlkPSInLiR1bml0LT5pZC4nIiBjbGFzcz0iYnRuIGJ0bi1zdWNjZXNzIGJ0bi14cyBtci0xIj5Vbml0IENvbnZlcnNpb25zPC9hPic7CiAgICAgICAgICAgICAgICAgICAgICAgICRhY3Rpb25zLj0nPGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiBkYXRhLXJvbGU9InB1dCIgZGF0YS1zcmM9Iicucm91dGUoJ3Btcy5wcm9kdWN0LW1hbmFnZW1lbnQucHJvZHVjdC11bml0LnNob3cnLCAkdW5pdC0+aWQpLiciIG9uY2xpY2s9ImVkaXRCdG4oJCh0aGlzKSkiIGNsYXNzPSJidG4gYnRuLWluZm8gYnRuLXhzIG1yLTEgZWRpdEJ0biI+PGkgY2xhc3M9ImxhcyBsYS1lZGl0Ij48L2k+PC9hPic7CiAgICAgICAgICAgICAgICAgICAgICAgICRhY3Rpb25zLj0nPGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiBkYXRhLXJvbGU9ImRlbGV0ZSIgb25jbGljaz0iZGVsZXRlQnRuKCQodGhpcykpIiBkYXRhLXNyYz0iJy5yb3V0ZSgncG1zLnByb2R1Y3QtbWFuYWdlbWVudC5wcm9kdWN0LXVuaXQuZGVzdHJveScsICR1bml0LT5pZCkuJyIgY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi14cyBtci0xIGRlbGV0ZUJ0biI+PGkgY2xhc3M9ImxhcyBsYS10cmFzaCI+PC9pPjwvYT4nOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGFjdGlvbnM7CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAtPnJhd0NvbHVtbnMoWydyb3VuZF9wb2xpY3knLCAnYWN0aW9ucyddKQogICAgICAgICAgICAgICAgICAgIC0+bWFrZSh0cnVlKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiB2aWV3KCdwbXMuYmFja2VuZC5wYWdlcy5wcm9kdWN0LXVuaXQuaW5kZXgnLCBjb21wYWN0KCd0aXRsZScsICdoZWFkZXJDb2x1bW5zJywnc3RhdHVzJywndW5pdF9jb2RlJykpOwogICAgICAgIH1jYXRjaCAoXFRocm93YWJsZSAkdGgpewogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmJhY2tXaXRoRXJyb3IoJHRoLT5nZXRNZXNzYWdlKCkpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFNob3cgdGhlIGZvcm0gZm9yIGNyZWF0aW5nIGEgbmV3IHJlc291cmNlLgogICAgICoKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gY3JlYXRlKCkKICAgIHsKICAgICAgICAvLwogICAgfQoKICAgIC8qKgogICAgICogU3RvcmUgYSBuZXdseSBjcmVhdGVkIHJlc291cmNlIGluIHN0b3JhZ2UuCiAgICAgKgogICAgICogQHBhcmFtICBcSWxsdW1pbmF0ZVxIdHRwXFJlcXVlc3QgICRyZXF1ZXN0CiAgICAgKiBAcmV0dXJuIFxJbGx1bWluYXRlXEh0dHBcUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHN0b3JlKFJlcXVlc3QgJHJlcXVlc3QpCiAgICB7CiAgICAgICAgJHRoaXMtPnZhbGlkYXRlKCRyZXF1ZXN0LCBbCiAgICAgICAgICAgICd1bml0X25hbWUnID0+IFsncmVxdWlyZWQnLCAnc3RyaW5nJywgJ21heDoyNTUnXSwKICAgICAgICAgICAgJ3VuaXRfY29kZScgPT4gWydyZXF1aXJlZCcsICdzdHJpbmcnLCAnbWF4OjI1NSddLAogICAgICAgICAgICAncm91bmRfcG9saWN5JyA9PiBbJ3JlcXVpcmVkJywgJ3N0cmluZycsICdtYXg6MjU1J10sCiAgICAgICAgICAgICdzdGF0dXMnID0+IFsncmVxdWlyZWQnLCAnc3RyaW5nJywgJ21heDoyNTUnXSwKICAgICAgICBdKTsKCiAgICAgICAgdHJ5IHsKCiAgICAgICAgICAgICRpbnB1dHMgPSAkcmVxdWVzdC0+YWxsKCk7CiAgICAgICAgICAgIHVuc2V0KCRpbnB1dHNbJ190b2tlbiddKTsKICAgICAgICAgICAgdW5zZXQoJGlucHV0c1snX21ldGhvZCddKTsKICAgICAgICAgICAgCiAgICAgICAgICAgICRwcm9kdWN0VW5pdCA9IFByb2R1Y3RVbml0OjpjcmVhdGUoJGlucHV0cyk7CiAgICAgICAgICAgIAogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmJhY2tXaXRoU3VjY2VzcygnUHJvZHVjdCBVbml0IGhhcyBiZWVuIGFkZGVkIHN1Y2Nlc3NmdWxseScpOwogICAgICAgIH1jYXRjaCAoXFRocm93YWJsZSAkdGgpewogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmJhY2tXaXRoRXJyb3IoJHRoLT5nZXRNZXNzYWdlKCkpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIERpc3BsYXkgdGhlIHNwZWNpZmllZCByZXNvdXJjZS4KICAgICAqCiAgICAgKiBAcGFyYW0gIFxBcHBcUHJvZHVjdFVuaXQgICRwcm9kdWN0VW5pdAogICAgICogQHJldHVybiBcSWxsdW1pbmF0ZVxIdHRwXFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBzaG93KFByb2R1Y3RVbml0ICRwcm9kdWN0VW5pdCkKICAgIHsKICAgICAgICB0cnkgewogICAgICAgICAgICAkcHJvZHVjdFVuaXQtPnNyYyA9IHJvdXRlKCdwbXMucHJvZHVjdC1tYW5hZ2VtZW50LnByb2R1Y3QtdW5pdC51cGRhdGUnLCRwcm9kdWN0VW5pdC0+aWQpOwogICAgICAgICAgICAkcHJvZHVjdFVuaXQtPnJlcV90eXBlID0gJ3B1dCc7CiAgICAgICAgICAgIAogICAgICAgICAgICAkZGF0YSA9IFsKICAgICAgICAgICAgICAgICdzdGF0dXMnID0+ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgICdpbmZvJyA9PiAkcHJvZHVjdFVuaXQKICAgICAgICAgICAgXTsKCiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKCRkYXRhKTsKICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgJGRhdGEgPSBbCiAgICAgICAgICAgICAgICAnc3RhdHVzJyA9PiBudWxsLAogICAgICAgICAgICAgICAgJ2luZm8nID0+ICR0aC0+Z2V0TWVzc2FnZSgpCiAgICAgICAgICAgIF07CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKCRkYXRhKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIHNwZWNpZmllZCByZXNvdXJjZSBpbiBzdG9yYWdlLgogICAgICoKICAgICAqIEBwYXJhbSAgXElsbHVtaW5hdGVcSHR0cFxSZXF1ZXN0ICAkcmVxdWVzdAogICAgICogQHBhcmFtICBcQXBwXFByb2R1Y3RVbml0ICAkcHJvZHVjdFVuaXQKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gdXBkYXRlKFJlcXVlc3QgJHJlcXVlc3QsIFByb2R1Y3RVbml0ICRwcm9kdWN0VW5pdCkKICAgIHsKICAgICAgICAkdGhpcy0+dmFsaWRhdGUoJHJlcXVlc3QsIFsKICAgICAgICAgICAgJ3VuaXRfbmFtZScgPT4gWydyZXF1aXJlZCcsICdzdHJpbmcnLCAnbWF4OjI1NSddLAogICAgICAgICAgICAndW5pdF9jb2RlJyA9PiBbJ3JlcXVpcmVkJywgJ3N0cmluZycsICdtYXg6MjU1J10sCiAgICAgICAgICAgICdyb3VuZF9wb2xpY3knID0+IFsncmVxdWlyZWQnLCAnc3RyaW5nJywgJ21heDoyNTUnXSwKICAgICAgICAgICAgJ3N0YXR1cycgPT4gWydyZXF1aXJlZCcsICdzdHJpbmcnLCAnbWF4OjI1NSddLAogICAgICAgIF0pOwoKICAgICAgICB0cnkgewogICAgICAgICAKICAgICAgICAgICAgJGlucHV0cyA9ICRyZXF1ZXN0LT5hbGwoKTsKICAgICAgICAgICAgdW5zZXQoJGlucHV0c1snX3Rva2VuJ10pOwogICAgICAgICAgICB1bnNldCgkaW5wdXRzWydfbWV0aG9kJ10pOwoKICAgICAgICAgICAgJHByb2R1Y3RVbml0LT51cGRhdGUoJGlucHV0cyk7CgogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmJhY2tXaXRoU3VjY2VzcygnUHJvZHVjdCBVbml0IGhhcyBiZWVuIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+YmFja1dpdGhFcnJvcigkdGgtPmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmVtb3ZlIHRoZSBzcGVjaWZpZWQgcmVzb3VyY2UgZnJvbSBzdG9yYWdlLgogICAgICoKICAgICAqIEBwYXJhbSAgXEFwcFxQcm9kdWN0VW5pdCAgJHByb2R1Y3RVbml0CiAgICAgKiBAcmV0dXJuIFxJbGx1bWluYXRlXEh0dHBcUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGRlc3Ryb3koUHJvZHVjdFVuaXQgJHByb2R1Y3RVbml0KQogICAgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgICRwcm9kdWN0VW5pdC0+ZGVsZXRlKCk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKCR0aC0+Z2V0TWVzc2FnZSgpKTsKICAgICAgICB9CiAgICB9CgoKICAgIHB1YmxpYyBmdW5jdGlvbiB1bml0Q29udmVyc2lvbnMoJGlkKQogICAgewogICAgICAgIHJldHVybiB2aWV3KCdwbXMuYmFja2VuZC5wYWdlcy5wcm9kdWN0LXVuaXQudW5pdC1jb252ZXJzaW9ucycsIFsKICAgICAgICAgICAgJ3VuaXQnID0+IFByb2R1Y3RVbml0Ojp3aXRoKFsKICAgICAgICAgICAgICAgICdtYXRyaXhlcycKICAgICAgICAgICAgXSktPmZpbmRPckZhaWwoJGlkKSwKICAgICAgICAgICAgJ3VuaXRzJyA9PiBQcm9kdWN0VW5pdDo6d2hlcmUoJ2lkJywgJyE9JywgJGlkKS0+Z2V0KCksCiAgICAgICAgXSk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHVwZGF0ZVVuaXRDb252ZXJzaW9ucyhSZXF1ZXN0ICRyZXF1ZXN0LCAkaWQpCiAgICB7CiAgICAgICAgREI6OmJlZ2luVHJhbnNhY3Rpb24oKTsKICAgICAgICB0cnl7CiAgICAgICAgICAgICR1bml0cyA9IFByb2R1Y3RVbml0Ojp3aGVyZSgnaWQnLCAnIT0nLCAkaWQpLT5nZXQoKTsKICAgICAgICAgICAgaWYoaXNzZXQoJHVuaXRzWzBdKSl7CiAgICAgICAgICAgICAgICBmb3JlYWNoKCR1bml0cyBhcyAkdW5pdCl7CiAgICAgICAgICAgICAgICAgICAgUHJvZHVjdFVuaXRNYXRyaXg6OnVwZGF0ZU9yQ3JlYXRlKFsKICAgICAgICAgICAgICAgICAgICAgICAgJ3Byb2R1Y3RfdW5pdF9pZCcgPT4gJGlkLAogICAgICAgICAgICAgICAgICAgICAgICAnY29udmVyc2lvbl91bml0X2lkJyA9PiAkdW5pdC0+aWQKICAgICAgICAgICAgICAgICAgICBdLCBbCiAgICAgICAgICAgICAgICAgICAgICAgICdjb252ZXJzaW9uX3JhdGUnID0+IGlzc2V0KCRyZXF1ZXN0LT51bml0c1skdW5pdC0+aWRdKSAmJiAkcmVxdWVzdC0+dW5pdHNbJHVuaXQtPmlkXSA+PSAwID8gJHJlcXVlc3QtPnVuaXRzWyR1bml0LT5pZF0gOiAwLAogICAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBEQjo6Y29tbWl0KCk7CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiB0cnVlLAogICAgICAgICAgICAgICAgJ21lc3NhZ2UnID0+ICJVbml0IENvbnZlcnNpb25zIGhhcyBiZWVuIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5LiIKICAgICAgICAgICAgXSk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIERCOjpyb2xsYmFjaygpOwogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAnc3VjY2VzcycgPT4gZmFsc2UsCiAgICAgICAgICAgICAgICAnbWVzc2FnZScgPT4gJHRoLT5nZXRNZXNzYWdlKCkKICAgICAgICAgICAgXSk7CiAgICAgICAgfQogICAgfQp9Cg==