<?php
bolt_decrypt( __FILE__ , 'UeMDSb'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcUG1zOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBBcHBcTW9kZWxzXFBtc01vZGVsc1xQcm9kdWN0Owp1c2UgQXBwXE1vZGVsc1xIclxVbml0Owp1c2UgQXBwXE1vZGVsc1xIclxEZXBhcnRtZW50Owp1c2UgQXBwXE1vZGVsc1xQbXNNb2RlbHNcV2FyZWhvdXNlczsKdXNlIEFwcFxNb2RlbHNcUG1zTW9kZWxzXEdyblxHb29kc1JlY2VpdmVkSXRlbVN0b2NrSW47CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKdXNlIE1hYXR3ZWJzaXRlXEV4Y2VsXEZhY2FkZXNcRXhjZWw7CnVzZSBEQiwgRGF0YVRhYmxlczsKCmNsYXNzIFByaWNlR3JhcGhDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlcgp7ICAgCiAgICBwdWJsaWMgZnVuY3Rpb24gaW5kZXgoKQogICAgewogICAgICAgIGlmKHJlcXVlc3QoKS0+aGFzKCdnZXQtc3ViLWNhdGVnb3JpZXMnKSl7CiAgICAgICAgICAgIHJldHVybiBjYXRlZ29yeU9wdGlvbnMoW10sIHJlcXVlc3QoKS0+Z2V0KCdjaG9zZW4nKSwgMCwgcmVxdWVzdCgpLT5oYXMoJ2ZpeGVkX2Fzc2V0JyksIHJlcXVlc3QoKS0+aGFzKCdjd2lwJykpOwogICAgICAgIH0KCiAgICAgICAgaWYocmVxdWVzdCgpLT5oYXMoJ2dldC1wcm9kdWN0cycpKXsKICAgICAgICAgICAgJHByb2R1Y3RzID0gUHJvZHVjdDo6d2l0aChbCiAgICAgICAgICAgICAgICAnYXR0cmlidXRlcy5hdHRyaWJ1dGVPcHRpb24uYXR0cmlidXRlJwogICAgICAgICAgICBdKQogICAgICAgICAgICAtPndoZXJlKCdjYXRlZ29yeV9pZCcsIHJlcXVlc3QoKS0+Z2V0KCdjYXRlZ29yeV9pZCcpKQogICAgICAgICAgICAtPmdldCgpOwoKICAgICAgICAgICAgJGRhdGEgPSAnJzsKICAgICAgICAgICAgaWYoaXNzZXQoJHByb2R1Y3RzWzBdKSl7CiAgICAgICAgICAgICAgICBmb3JlYWNoICgkcHJvZHVjdHMgYXMgJHByb2R1Y3QpIHsKICAgICAgICAgICAgICAgICAgICAkZGF0YSAuPSAnPG9wdGlvbiB2YWx1ZT0iJy4kcHJvZHVjdC0+aWQuJyIgJy4ocmVxdWVzdCgpLT5nZXQoJ2Nob3NlbicpID09ICRwcm9kdWN0LT5pZCA/ICdzZWxlY3RlZCcgOiAnJykuJz4nLiRwcm9kdWN0LT5uYW1lLicgJy5nZXRQcm9kdWN0QXR0cmlidXRlc0Zhc3RlcigkcHJvZHVjdCkuJzwvb3B0aW9uPic7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICRkYXRhOwogICAgICAgIH0KCiAgICAgICAgJHByb2R1Y3QgPSBQcm9kdWN0OjpmaW5kKHJlcXVlc3QoKS0+Z2V0KCdwcm9kdWN0X2lkJykpOwogICAgICAgICRkYXRhID0gW107CiAgICAgICAgaWYoaXNzZXQoJHByb2R1Y3QtPmlkKSAmJiBzdHJ0b3RpbWUocmVxdWVzdCgpLT5nZXQoJ2Zyb20nKSkgPiAwICYmIHN0cnRvdGltZShyZXF1ZXN0KCktPmdldCgndG8nKSkpewogICAgICAgICAgICAkc3RvY2tJbnMgPSBHb29kc1JlY2VpdmVkSXRlbVN0b2NrSW46OndoZXJlSGFzKCdyZWxHb29kc1JlY2VpdmVkSXRlbXMnLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ3Byb2R1Y3RfaWQnLCByZXF1ZXN0KCktPmdldCgncHJvZHVjdF9pZCcpKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLT53aGVyZUhhcygncmVsR29vZHNSZWNlaXZlZEl0ZW1zLnJlbEdvb2RzUmVjZWl2ZWROb3RlJywgZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlRGF0ZSgncmVjZWl2ZWRfZGF0ZScsICc+PScsIHJlcXVlc3QoKS0+Z2V0KCdmcm9tJykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLT53aGVyZURhdGUoJ3JlY2VpdmVkX2RhdGUnLCAnPD0nLCByZXF1ZXN0KCktPmdldCgndG8nKSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC0+d2hlbighZW1wdHkocmVxdWVzdCgpLT5nZXQoJ2hyX3VuaXRfaWQnKSksIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZUhhcygncmVsUHVyY2hhc2VPcmRlcicsIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ2hyX3VuaXRfaWQnLCByZXF1ZXN0KCktPmdldCgnaHJfdW5pdF9pZCcpKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KQogICAgICAgICAgICAtPndoZW4oIWVtcHR5KHJlcXVlc3QoKS0+Z2V0KCdocl9kZXBhcnRtZW50X2lkJykpLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmVIYXMoJ3JlbFB1cmNoYXNlT3JkZXIucmVsUXVvdGF0aW9uLnJlbFJlcXVlc3RQcm9wb3NhbC5yZXF1ZXN0UHJvcG9zYWxSZXF1aXNpdGlvbi5yZWxSZXF1aXNpdGlvbi5yZWxVc2Vyc0xpc3QuZW1wbG95ZWUnLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKCdhc19kZXBhcnRtZW50X2lkJywgcmVxdWVzdCgpLT5nZXQoJ2hyX2RlcGFydG1lbnRfaWQnKSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLT53aGVuKCFlbXB0eShyZXF1ZXN0KCktPmdldCgnd2FyZWhvdXNlX2lkJykpLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ3dhcmVob3VzZV9pZCcsIHJlcXVlc3QoKS0+Z2V0KCd3YXJlaG91c2VfaWQnKSk7CiAgICAgICAgICAgIH0pCgogICAgICAgICAgICAtPmpvaW4oJ2dvb2RzX3JlY2VpdmVkX2l0ZW1zJywgJ2dvb2RzX3JlY2VpdmVkX2l0ZW1zLmlkJywgJz0nLCAnZ29vZHNfcmVjZWl2ZWRfaXRlbXNfc3RvY2tfaW4uZ29vZHNfcmVjZWl2ZWRfaXRlbV9pZCcpCiAgICAgICAgICAgIC0+am9pbignZ29vZHNfcmVjZWl2ZWRfbm90ZXMnLCAnZ29vZHNfcmVjZWl2ZWRfbm90ZXMuaWQnLCAnPScsICdnb29kc19yZWNlaXZlZF9pdGVtcy5nb29kc19yZWNlaXZlZF9ub3RlX2lkJykKICAgICAgICAgICAgLT5ncm91cEJ5KERCOjpyYXcoJ3N1YnN0cihnb29kc19yZWNlaXZlZF9ub3Rlcy5yZWNlaXZlZF9kYXRlLCAxLCAxMCknKSkKICAgICAgICAgICAgLT5nZXQoWwogICAgICAgICAgICAgICAgREI6OnJhdygnc3VtKGdvb2RzX3JlY2VpdmVkX2l0ZW1zX3N0b2NrX2luLnJlY2VpdmVkX3F0eSkgYXMgcXR5JyksCiAgICAgICAgICAgICAgICBEQjo6cmF3KCdzdWJzdHIoZ29vZHNfcmVjZWl2ZWRfbm90ZXMucmVjZWl2ZWRfZGF0ZSwgMSwgMTApIGFzIGRhdGUnKQogICAgICAgICAgICBdKTsKCiAgICAgICAgICAgIGlmKGNvdW50KCRzdG9ja0lucykgPiAwKXsKICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRzdG9ja0lucyBhcyAkdmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICBhcnJheV9wdXNoKCRkYXRhLCBbCiAgICAgICAgICAgICAgICAgICAgICAgICdkYXRlJyA9PiBzdHJ0b3RpbWUoJHZhbHVlLT5kYXRlKSoxMDAwLAogICAgICAgICAgICAgICAgICAgICAgICAncXR5JyA9PiAoaW50KSAoJHZhbHVlLT5xdHkpCiAgICAgICAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiB2aWV3KCdwbXMuYmFja2VuZC5wYWdlcy5wcm9kdWN0cy5ncmFwaCcsIFsKICAgICAgICAgICAgJ3RpdGxlJyA9PiAiUHJvZHVjdCBQcmljZSBHcmFwaCIsCiAgICAgICAgICAgICd1bml0cycgPT4gVW5pdDo6YWxsKCksCiAgICAgICAgICAgICdkZXBhcnRtZW50cycgPT4gRGVwYXJ0bWVudDo6YWxsKCksCiAgICAgICAgICAgICd3YXJlaG91c2VzJyA9PiBXYXJlaG91c2VzOjphbGwoKSwKICAgICAgICAgICAgJ2RhdGEnID0+ICRkYXRhCiAgICAgICAgXSk7CiAgICB9Cn0K