<?php
bolt_decrypt( __FILE__ , 'a5ggVF'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcUG1zOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBBcHBcTW9kZWxzXFBtc01vZGVsc1xJbnZlbnRvcnlNb2RlbHNcSW52ZW50b3J5U3VtbWFyeTsKdXNlIEFwcFxNb2RlbHNcUG1zTW9kZWxzXEludmVudG9yeU1vZGVsc1xJbnZlbnRvcnlEZXRhaWxzOwp1c2UgQXBwXE1vZGVsc1xQbXNNb2RlbHNcQ2F0ZWdvcnk7CnVzZSBBcHBcTW9kZWxzXFBtc01vZGVsc1xQcm9kdWN0Owp1c2UgQXBwXE1vZGVsc1xQbXNNb2RlbHNcV2FyZWhvdXNlczsKdXNlIElsbHVtaW5hdGVcSHR0cFxSZXF1ZXN0Owp1c2UgSWxsdW1pbmF0ZVxIdHRwXFJlcXVlc3RzOwp1c2UgQXBwLCBBdXRoLCBEQiwgRGF0YVRhYmxlczsKCmNsYXNzIEludmVudG9yeVN1bW1hcnlDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlcgp7CiAgICBwdWJsaWMgZnVuY3Rpb24gaGVhZGVyQ29sdW1ucygkdmFsdWU9JycpCiAgICB7CiAgICAgICAgcmV0dXJuIGFycmF5KAogICAgICAgICAgICBbJ1NMJywgJ1NMJ10sCiAgICAgICAgICAgIFsnY2F0ZWdvcnknLCAnY2F0ZWdvcnknLCAndGV4dC1jZW50ZXInXSwKICAgICAgICAgICAgWydwcm9kdWN0JywgJ3Byb2R1Y3QnLCAndGV4dC1jZW50ZXInXSwKICAgICAgICAgICAgWydVT00nLCAnVU9NJywgJ3RleHQtY2VudGVyJ10sCiAgICAgICAgICAgIFsncXR5JywgJ3F0eScsICd0ZXh0LWNlbnRlciddLAogICAgICAgICk7CiAgICB9CgogICAgLyoqCiAgICAgKiBEaXNwbGF5IGEgbGlzdGluZyBvZiB0aGUgcmVzb3VyY2UuCiAgICAgKgogICAgICogQHJldHVybiBcSWxsdW1pbmF0ZVxIdHRwXFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBpbmRleCgpCiAgICB7CiAgICAgICAgJGNhdGVnb3J5X2lkID0gcmVxdWVzdCgpLT5oYXMoJ2NhdGVnb3J5X2lkJykgPyByZXF1ZXN0KCktPmdldCgnY2F0ZWdvcnlfaWQnKSA6IDA7CiAgICAgICAgJHN1Yl9jYXRlZ29yeV9pZCA9IHJlcXVlc3QoKS0+aGFzKCdzdWJfY2F0ZWdvcnlfaWQnKSA/IHJlcXVlc3QoKS0+Z2V0KCdzdWJfY2F0ZWdvcnlfaWQnKSA6IDA7CiAgICAgICAgJHByb2R1Y3RfaWQgPSByZXF1ZXN0KCktPmhhcygncHJvZHVjdF9pZCcpID8gcmVxdWVzdCgpLT5nZXQoJ3Byb2R1Y3RfaWQnKSA6IDA7CiAgICAgICAgJHdhcmVob3VzZV9pZHMgPSBhdXRoKCktPnVzZXIoKS0+cmVsVXNlcnNXYXJlaG91c2UtPnBsdWNrKCdpZCcpLT50b0FycmF5KCk7CgogICAgICAgIHRyeSB7CgogICAgICAgICAgICBpZiAocmVxdWVzdCgpLT5hamF4KCkpIHsKICAgICAgICAgICAgICAgICAkaW52ZW50b3JpZXMgPSBJbnZlbnRvcnlEZXRhaWxzOjp3aXRoKFsKICAgICAgICAgICAgICAgICAgICAncmVsQ2F0ZWdvcnknLAogICAgICAgICAgICAgICAgICAgICdyZWxQcm9kdWN0LmF0dHJpYnV0ZXMuYXR0cmlidXRlT3B0aW9uLmF0dHJpYnV0ZScsCiAgICAgICAgICAgICAgICAgICAgJ3JlbFByb2R1Y3QucHJvZHVjdFVuaXQnCiAgICAgICAgICAgICAgICBdKQogICAgICAgICAgICAgICAgLT53aGVuKCRjYXRlZ29yeV9pZD4wLCBmdW5jdGlvbigkcXVlcnkpIHVzZSgkY2F0ZWdvcnlfaWQpewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKGZ1bmN0aW9uKCRxdWVyeSkgdXNlKCRjYXRlZ29yeV9pZCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKCdjYXRlZ29yeV9pZCcsICRjYXRlZ29yeV9pZCkKICAgICAgICAgICAgICAgICAgICAgICAgLT5vcldoZXJlKGZ1bmN0aW9uKCRxdWVyeSkgdXNlKCRjYXRlZ29yeV9pZCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZUhhcygncmVsQ2F0ZWdvcnknLCBmdW5jdGlvbigkcXVlcnkpIHVzZSgkY2F0ZWdvcnlfaWQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKCdwYXJlbnRfaWQnLCAkY2F0ZWdvcnlfaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+d2hlbigkc3ViX2NhdGVnb3J5X2lkID4gMCxmdW5jdGlvbigkcXVlcnkpIHVzZSgkc3ViX2NhdGVnb3J5X2lkKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnY2F0ZWdvcnlfaWQnLCAkc3ViX2NhdGVnb3J5X2lkKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPndoZW4oJHByb2R1Y3RfaWQ+MCxmdW5jdGlvbigkcXVlcnkpIHVzZSgkcHJvZHVjdF9pZCl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ3Byb2R1Y3RfaWQnLCRwcm9kdWN0X2lkKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPndoZW4oaXNzZXQoJHdhcmVob3VzZV9pZHNbMF0pLGZ1bmN0aW9uKCRxdWVyeSkgdXNlKCR3YXJlaG91c2VfaWRzKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZUluKCd3YXJlaG91c2VfaWQnLCR3YXJlaG91c2VfaWRzKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPndoZW4oaXNzZXQoYXV0aCgpLT51c2VyKCktPmVtcGxveWVlLT5hc191bml0X2lkKSwgZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnaHJfdW5pdF9pZCcsYXV0aCgpLT51c2VyKCktPmVtcGxveWVlLT5hc191bml0X2lkKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPndoZXJlKCdzdGF0dXMnLCdhY3RpdmUnKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVRhYmxlczo6b2YoJGludmVudG9yaWVzKQogICAgICAgICAgICAgICAgICAgIC0+YWRkSW5kZXhDb2x1bW4oKQogICAgICAgICAgICAgICAgICAgIC0+YWRkQ29sdW1uKCdjYXRlZ29yeScsIGZ1bmN0aW9uKCRpbnZlbnRvcnkpewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNzZXQoJGludmVudG9yeS0+cmVsQ2F0ZWdvcnktPm5hbWUpPyRpbnZlbnRvcnktPnJlbENhdGVnb3J5LT5uYW1lOicnOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLT5maWx0ZXJDb2x1bW4oJ2NhdGVnb3J5JywgZnVuY3Rpb24gKCRxdWVyeSwgJGtleXdvcmQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmVIYXMoJ3JlbENhdGVnb3J5JywgZnVuY3Rpb24gKCRxdWVyeSkgdXNlKCRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcXVlcnktPndoZXJlKCduYW1lJywgJ0xJS0UnLCAnJScuJGtleXdvcmQuJyUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAtPmFkZENvbHVtbigncHJvZHVjdCcsIGZ1bmN0aW9uKCRpbnZlbnRvcnkpewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljaz0ib3Blbk1vZGFsKCcuKGlzc2V0KCRpbnZlbnRvcnktPnJlbFByb2R1Y3QtPmlkKSA/ICRpbnZlbnRvcnktPnJlbFByb2R1Y3QtPmlkIDogMCkuJykiIGNsYXNzPSJidG4gYnRuLWxpbmsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLihpc3NldCgkaW52ZW50b3J5LT5yZWxQcm9kdWN0LT5uYW1lKT8kaW52ZW50b3J5LT5yZWxQcm9kdWN0LT5uYW1lOicnKS4nICcuZ2V0UHJvZHVjdEF0dHJpYnV0ZXNGYXN0ZXIoJGludmVudG9yeS0+cmVsUHJvZHVjdCkuJzwvYT4nOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLT5maWx0ZXJDb2x1bW4oJ3Byb2R1Y3QnLCBmdW5jdGlvbiAoJHF1ZXJ5LCAka2V5d29yZCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZUhhcygncmVsUHJvZHVjdCcsIGZ1bmN0aW9uICgkcXVlcnkpIHVzZSgka2V5d29yZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHF1ZXJ5LT53aGVyZSgnbmFtZScsICdMSUtFJywgJyUnLiRrZXl3b3JkLiclJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLT5hZGRDb2x1bW4oJ1VPTScsIGZ1bmN0aW9uKCRpbnZlbnRvcnkpewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGludmVudG9yeS0+cmVsUHJvZHVjdC0+cHJvZHVjdFVuaXQtPnVuaXRfbmFtZTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC0+ZmlsdGVyQ29sdW1uKCdVT00nLCBmdW5jdGlvbiAoJHF1ZXJ5LCAka2V5d29yZCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZUhhcygncmVsUHJvZHVjdC5wcm9kdWN0VW5pdCcsIGZ1bmN0aW9uICgkcXVlcnkpIHVzZSgka2V5d29yZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHF1ZXJ5LT53aGVyZSgndW5pdF9uYW1lJywgJ0xJS0UnLCAnJScuJGtleXdvcmQuJyUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAtPmFkZENvbHVtbigncXR5JywgZnVuY3Rpb24oJGludmVudG9yeSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJbnZlbnRvcnlEZXRhaWxzOjp3aGVyZSgncHJvZHVjdF9pZCcsICRpbnZlbnRvcnktPnByb2R1Y3RfaWQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0+d2hlbihpc3NldChhdXRoKCktPnVzZXIoKS0+ZW1wbG95ZWUtPmFzX3VuaXRfaWQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ2hyX3VuaXRfaWQnLGF1dGgoKS0+dXNlcigpLT5lbXBsb3llZS0+YXNfdW5pdF9pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLT5zdW0oJ3F0eScpOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLT5yYXdDb2x1bW5zKFsncHJvZHVjdCcsICdhdHRyaWJ1dGVzJ10pCiAgICAgICAgICAgICAgICAgICAgLT50b0pzb24oKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHZpZXcoJ3Btcy5iYWNrZW5kLnBhZ2VzLmludmVudG9yeS5pbnZlbnRvcnktc3VtbWFyeS5pbmRleCcsIFsKICAgICAgICAgICAgICAgICd0aXRsZScgPT4gJ0ludmVudG9yeSBTdW1tYXJ5IExpc3QnLAogICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJyA9PiAkY2F0ZWdvcnlfaWQsCiAgICAgICAgICAgICAgICAnc3ViX2NhdGVnb3J5X2lkJyA9PiAkc3ViX2NhdGVnb3J5X2lkLAogICAgICAgICAgICAgICAgJ3Byb2R1Y3RfaWQnID0+ICRwcm9kdWN0X2lkLAogICAgICAgICAgICAgICAgJ2NhdGVnb3JpZXMnID0+IENhdGVnb3J5OjpoYXMoJ3N1YkNhdGVnb3J5JyktPm9yZGVyQnkoJ25hbWUnLCdhc2MnKS0+Z2V0KCksCiAgICAgICAgICAgICAgICAnaGVhZGVyQ29sdW1ucycgPT4gJHRoaXMtPmhlYWRlckNvbHVtbnMoKQogICAgICAgICAgICBdKTsKICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5iYWNrV2l0aEVycm9yKCR0aC0+Z2V0TWVzc2FnZSgpKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBEaXNwbGF5IHRoZSBzcGVjaWZpZWQgcmVzb3VyY2UuCiAgICAgKgogICAgICogQHBhcmFtICBcQXBwXE1vZGVsc1xJbnZlbnRvcnlEZXRhaWxzICAkaW52ZW50b3J5RGV0YWlscwogICAgICogQHJldHVybiBcSWxsdW1pbmF0ZVxIdHRwXFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRQcm9kdWN0KCRjYXRlZ29yeV9pZCl7CiAgICAgICAgaWYocmVxdWVzdCgpLT5oYXMoJ3N1Yi1jYXRlZ29yaWVzJykpewogICAgICAgICAgICByZXR1cm4gQ2F0ZWdvcnk6OmhhcygnY2F0ZWdvcnknKQogICAgICAgICAgICAtPndoZW4oJGNhdGVnb3J5X2lkPjAsZnVuY3Rpb24oJHF1ZXJ5KSB1c2UoJGNhdGVnb3J5X2lkKXsKICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKCdwYXJlbnRfaWQnLCRjYXRlZ29yeV9pZCk7CiAgICAgICAgICAgIH0pLT5nZXQoKTsKICAgICAgICB9CgogICAgICAgICRwcm9kdWN0cyA9IFByb2R1Y3Q6OndpdGgoWwogICAgICAgICAgICAnY2F0ZWdvcnknLCAnYXR0cmlidXRlcy5hdHRyaWJ1dGVPcHRpb24uYXR0cmlidXRlJwogICAgICAgIF0pCiAgICAgICAgLT53aGVyZSgnc3RhdHVzJywgJ2FwcHJvdmVkJykKICAgICAgICAtPndoZW4oJGNhdGVnb3J5X2lkPjAsZnVuY3Rpb24oJHF1ZXJ5KSB1c2UoJGNhdGVnb3J5X2lkKXsKICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ2NhdGVnb3J5X2lkJywgJGNhdGVnb3J5X2lkKQogICAgICAgICAgICAtPm9yV2hlcmUoZnVuY3Rpb24oJHF1ZXJ5KSB1c2UoJGNhdGVnb3J5X2lkKXsKICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlSGFzKCdjYXRlZ29yeScsIGZ1bmN0aW9uKCRxdWVyeSkgdXNlKCRjYXRlZ29yeV9pZCl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ3BhcmVudF9pZCcsICRjYXRlZ29yeV9pZCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgICAtPndoZW4ocmVxdWVzdCgpLT5nZXQoJ3N1Yl9jYXRlZ29yeV9pZCcpID4gMCxmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnY2F0ZWdvcnlfaWQnLCByZXF1ZXN0KCktPmdldCgnc3ViX2NhdGVnb3J5X2lkJykpOwogICAgICAgIH0pCiAgICAgICAgLT5vcmRlckJ5KCduYW1lJywnYXNjJykKICAgICAgICAtPmdldCgpOwoKICAgICAgICAkYXR0cmlidXRlcyA9IFtdOwogICAgICAgIGlmKGlzc2V0KCRwcm9kdWN0c1swXSkpewogICAgICAgICAgICBmb3JlYWNoKCRwcm9kdWN0cyBhcyAka2V5ID0+ICRwcm9kdWN0KXsKICAgICAgICAgICAgICAgICRhdHRyaWJ1dGVzWyRwcm9kdWN0LT5pZF0gPSBnZXRQcm9kdWN0QXR0cmlidXRlc0Zhc3RlcigkcHJvZHVjdCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgJ3Byb2R1Y3RzJyA9PiAkcHJvZHVjdHMsCiAgICAgICAgICAgICdhdHRyaWJ1dGVzJyA9PiAkYXR0cmlidXRlcywKICAgICAgICBdKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNob3cgdGhlIGZvcm0gZm9yIGNyZWF0aW5nIGEgbmV3IHJlc291cmNlLgogICAgICoKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gY3JlYXRlKCkKICAgIHsKICAgICAgICAvLwogICAgfQoKICAgIC8qKgogICAgICogU3RvcmUgYSBuZXdseSBjcmVhdGVkIHJlc291cmNlIGluIHN0b3JhZ2UuCiAgICAgKgogICAgICogQHBhcmFtICBcSWxsdW1pbmF0ZVxIdHRwXFJlcXVlc3QgICRyZXF1ZXN0CiAgICAgKiBAcmV0dXJuIFxJbGx1bWluYXRlXEh0dHBcUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHN0b3JlKFJlcXVlc3RzXEludmVudG9yeVN1bW1hcnlSZXF1ZXN0ICRyZXF1ZXN0KQogICAgewogICAgICAgIC8vCiAgICB9CgogICAgLyoqCiAgICAgKiBEaXNwbGF5IHRoZSBzcGVjaWZpZWQgcmVzb3VyY2UuCiAgICAgKgogICAgICogQHBhcmFtICBcQXBwXE1vZGVsc1xJbnZlbnRvcnlTdW1tYXJ5ICAkSW52ZW50b3J5U3VtbWFyeQogICAgICogQHJldHVybiBcSWxsdW1pbmF0ZVxIdHRwXFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBzaG93KCRkYXRhKQogICAgewogICAgICAgIAogICAgfQoKICAgIC8qKgogICAgICogU2hvdyB0aGUgZm9ybSBmb3IgcHJvZHVjdCB3aXNlIEludmVudG9yeSBkZXRhaWxzLgogICAgICoKICAgICAqIEBwYXJhbSAgXEFwcFxNb2RlbHNcSW52ZW50b3J5U3VtbWFyeSAgJEludmVudG9yeVN1bW1hcnkKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCgogICAgcHVibGljIGZ1bmN0aW9uIHdhcmVob3VzZVdpc2VQcm9kdWN0SW52ZW50b3J5RGV0YWlscygkcHJvZHVjdF9pZCkKICAgIHsKICAgICAgICAgICB0cnkgewoKICAgICAgICAgICAgJHRpdGxlID0gJ1dhcmVob3VzZSBXaXNlIFByb2R1Y3QgSW52ZW50b3J5IERldGFpbHMnOwogICAgICAgICAgICAkd2FyZWhvdXNlX2lkcyA9IGF1dGgoKS0+dXNlcigpLT5yZWxVc2Vyc1dhcmVob3VzZS0+cGx1Y2soJ2lkJyktPnRvQXJyYXkoKTsKICAgICAgICAgICAgJHByb2R1Y3QgPSBQcm9kdWN0OjpmaW5kT3JGYWlsKCRwcm9kdWN0X2lkKTsKCiAgICAgICAgICAgIHJldHVybiB2aWV3KCdwbXMuYmFja2VuZC5wYWdlcy5pbnZlbnRvcnkuaW52ZW50b3J5LXN1bW1hcnkud2FyZWhvdXNlLXdpc2UtaW52ZW50b3J5LWRldGFpbHMnLCBjb21wYWN0KCd0aXRsZScsJ3Byb2R1Y3QnLCd3YXJlaG91c2VfaWRzJykpOwoKICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5iYWNrV2l0aEVycm9yKCR0aC0+Z2V0TWVzc2FnZSgpKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBTaG93IHRoZSBmb3JtIGZvciBlZGl0aW5nIHRoZSBzcGVjaWZpZWQgcmVzb3VyY2UuCiAgICAgKgogICAgICogQHBhcmFtICBcQXBwXE1vZGVsc1xJbnZlbnRvcnlTdW1tYXJ5ICAkSW52ZW50b3J5U3VtbWFyeQogICAgICogQHJldHVybiBcSWxsdW1pbmF0ZVxIdHRwXFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBlZGl0KEludmVudG9yeVN1bW1hcnkgJEludmVudG9yeVN1bW1hcnkpCiAgICB7CiAgICAgICAgLy8KICAgIH0KCiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgc3BlY2lmaWVkIHJlc291cmNlIGluIHN0b3JhZ2UuCiAgICAgKgogICAgICogQHBhcmFtICBcSWxsdW1pbmF0ZVxIdHRwXFJlcXVlc3QgICRyZXF1ZXN0CiAgICAgKiBAcGFyYW0gIFxBcHBcTW9kZWxzXEludmVudG9yeVN1bW1hcnkgICRJbnZlbnRvcnlTdW1tYXJ5CiAgICAgKiBAcmV0dXJuIFxJbGx1bWluYXRlXEh0dHBcUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHVwZGF0ZShSZXF1ZXN0ICRyZXF1ZXN0LCBJbnZlbnRvcnlTdW1tYXJ5ICRJbnZlbnRvcnlTdW1tYXJ5KQogICAgewogICAgICAgIC8vCiAgICB9CgogICAgLyoqCiAgICAgKiBSZW1vdmUgdGhlIHNwZWNpZmllZCByZXNvdXJjZSBmcm9tIHN0b3JhZ2UuCiAgICAgKgogICAgICogQHBhcmFtICBcQXBwXE1vZGVsc1xJbnZlbnRvcnlTdW1tYXJ5ICAkSW52ZW50b3J5U3VtbWFyeQogICAgICogQHJldHVybiBcSWxsdW1pbmF0ZVxIdHRwXFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBkZXN0cm95KEludmVudG9yeVN1bW1hcnkgJEludmVudG9yeVN1bW1hcnkpCiAgICB7CiAgICAgICAgLy8KICAgIH0KfQo=