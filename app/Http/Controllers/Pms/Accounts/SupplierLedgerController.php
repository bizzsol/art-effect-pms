<?php
bolt_decrypt( __FILE__ , 'n91reQ'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcUG1zXEFjY291bnRzOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKdXNlIEFwcFxNb2RlbHNcUG1zTW9kZWxzXFN1cHBsaWVyUGF5bWVudDsKdXNlIEFwcFxNb2RlbHNcUG1zTW9kZWxzXFN1cHBsaWVyTGVkZ2VyczsKdXNlIEFwcFxNb2RlbHNcUG1zTW9kZWxzXFN1cHBsaWVyczsKdXNlIEFwcFxNb2RlbHNcUG1zTW9kZWxzXFB1cmNoYXNlXFB1cmNoYXNlT3JkZXI7CnVzZSBEQjsKdXNlIEF1dGg7CnVzZSBBcHA7CnVzZSBEYXRhVGFibGVzOwoKY2xhc3MgU3VwcGxpZXJMZWRnZXJDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlcgp7CiAgICAvKioKICAgICAqIFNldCBnbG9iYWwgZGF0YSB0YWJsZSBoZWFkZXJzLgogICAgICoKICAgICAqIEByZXR1cm4gaGVhZGVyQ29sdW1ucwogICAgICovCgogICAgcHVibGljIGZ1bmN0aW9uIGhlYWRlckNvbHVtbnMoJHZhbHVlPScnKQogICAgewogICAgICAgICRyb3dzID0gIGFycmF5KAogICAgICAgICAgICBbJ1NMJywgJ1NMJ10sCiAgICAgICAgICAgIFsnc3VwcGxpZXInLCAnc3VwcGxpZXInLCAndGV4dC1jZW50ZXInXSwKICAgICAgICAgICAgWydkYXRlJywgJ2RhdGUnLCAndGV4dC1jZW50ZXInXSwKICAgICAgICAgICAgWyd0eXBlJywgJ3R5cGUnLCAndGV4dC1jZW50ZXInXSwKICAgICAgICAgICAgWydwYXltZW50X2RldGFpbHMnLCAncGF5bWVudF9kZXRhaWxzJywgJ3RleHQtbGVmdCddLAogICAgICAgICAgICBbJ25vdGVzJywgJ25vdGVzJywgJ3RleHQtbGVmdCddLCAKICAgICAgICAgICAgWydvcGVuaW5nX2JhbGFuY2UnLCAnb3BlbmluZ19iYWxhbmNlJywgJ3RleHQtcmlnaHQnXSwKICAgICAgICAgICAgWydkZWJpdCcsICdkZWJpdCcsICd0ZXh0LXJpZ2h0J10sIAogICAgICAgICAgICBbJ2NyZWRpdCcsICdjcmVkaXQnLCAndGV4dC1yaWdodCddLAogICAgICAgICAgICBbJ2Nsb3NpbmdfYmFsYW5jZScsICdjbG9zaW5nX2JhbGFuY2UnLCAndGV4dC1yaWdodCddCiAgICAgICAgKTsKICAgICAgICByZXR1cm4gJHJvd3M7CiAgICB9CgogICAgIC8qKgogICAgICogRGlzcGxheSBhIGxpc3Rpbmcgb2YgdGhlIHJlc291cmNlLgogICAgICoKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gaW5kZXgoKQogICAgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgICRmcm9tX2RhdGUgPSByZXF1ZXN0KCktPmhhcygnZnJvbV9kYXRlJykgJiYgIWVtcHR5KHJlcXVlc3QoKS0+Z2V0KCdmcm9tX2RhdGUnKSkgPyBkYXRlKCJZLW0tZCIsIHN0cnRvdGltZShyZXF1ZXN0KCktPmdldCgnZnJvbV9kYXRlJykpKSA6IGRhdGUoIlktbS1kIiwgc3RydG90aW1lKGRhdGUoJ1ktbS0wMScpKSk7CiAgICAgICAgICAgICR0b19kYXRlID0gcmVxdWVzdCgpLT5oYXMoJ3RvX2RhdGUnKSAmJiAhZW1wdHkocmVxdWVzdCgpLT5nZXQoJ3RvX2RhdGUnKSkgPyBkYXRlKCJZLW0tZCIsIHN0cnRvdGltZShyZXF1ZXN0KCktPmdldCgndG9fZGF0ZScpKSkgOiBkYXRlKCJZLW0tZCIsIHN0cnRvdGltZShkYXRlKCdZLW0tdCcpKSk7CiAgICAgICAgICAgICRzdXBwbGllcl9pZCA9IHJlcXVlc3QoKS0+aGFzKCdzdXBwbGllcl9pZCcpID8gcmVxdWVzdCgpLT5nZXQoJ3N1cHBsaWVyX2lkJykgOiBudWxsOwogICAgICAgICAgICAkc2VsZWN0ZWRfc3VwcGxpZXIgPSBTdXBwbGllcnM6OmZpbmQoJHN1cHBsaWVyX2lkKTsKCiAgICAgICAgICAgICRzdXBwbGllcnMgPSBTdXBwbGllcnM6OndoZXJlKCdzdGF0dXMnLCAnQWN0aXZlJyktPmhhcygnc3VwcGxpZXJMZWRnZXJzJyktPmdldChbJ2lkJywgJ25hbWUnLCAnY29kZSddKTsKCiAgICAgICAgICAgICRsZWRnZXJzID0gU3VwcGxpZXJMZWRnZXJzOjp3aGVyZSgnc3VwcGxpZXJfaWQnLCAkc3VwcGxpZXJfaWQpCiAgICAgICAgICAgIC0+d2hlcmVCZXR3ZWVuKCdkYXRlJywgWyRmcm9tX2RhdGUsICR0b19kYXRlXSk7CgoKICAgICAgICAgICAgaWYgKHJlcXVlc3QoKS0+YWpheCgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YXRhYmxlczo6b2YoJGxlZGdlcnMpCiAgICAgICAgICAgICAgICAtPmFkZEluZGV4Q29sdW1uKCkKICAgICAgICAgICAgICAgIC0+YWRkQ29sdW1uKCdzdXBwbGllcicsIGZ1bmN0aW9uKCR2YWx1ZXMpewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkdmFsdWVzLT5zdXBwbGllci0+bmFtZS4nICgnLiR2YWx1ZXMtPnN1cHBsaWVyLT5jb2RlLicpJzsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmZpbHRlckNvbHVtbignc3VwcGxpZXInLCBmdW5jdGlvbiAoJHF1ZXJ5LCAka2V5d29yZCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlSGFzKCdzdXBwbGllcicsIGZ1bmN0aW9uICgkcXVlcnkpIHVzZSAoJGtleXdvcmQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHF1ZXJ5LT53aGVyZSgnbmFtZScsICdMSUtFJywgJyUnIC4gJGtleXdvcmQgLiAnJScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0+b3JXaGVyZSgnY29kZScsICdMSUtFJywgJyUnIC4gJGtleXdvcmQgLiAnJScpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+b3JkZXJDb2x1bW4oJ3N1cHBsaWVyJywgZnVuY3Rpb24gKCRxdWVyeSwgJG9yZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBsZWFzZVNvcnRNZSgkcXVlcnksICRvcmRlciwgU3VwcGxpZXJzOjpzZWxlY3QoJ3N1cHBsaWVycy5uYW1lJykKICAgICAgICAgICAgICAgICAgICAgICAgLT53aGVyZUNvbHVtbignc3VwcGxpZXJzLmlkJywgJ3N1cHBsaWVyX2xlZGdlcnMuc3VwcGxpZXJfaWQnKQogICAgICAgICAgICAgICAgICAgICAgICAtPnRha2UoMSkKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+ZWRpdENvbHVtbignZGF0ZScsIGZ1bmN0aW9uKCR2YWx1ZXMpewogICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRlKCdZLW0tZCcsIHN0cnRvdGltZSgkdmFsdWVzLT5kYXRlKSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5hZGRDb2x1bW4oJ3R5cGUnLCBmdW5jdGlvbigkdmFsdWVzKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNzZXQocGF5bWVudFR5cGVzKClbJHZhbHVlcy0+cGF5bWVudF90eXBlXSkgPyBwYXltZW50VHlwZXMoKVskdmFsdWVzLT5wYXltZW50X3R5cGVdWyduYW1lJ10gOiAnJzsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmZpbHRlckNvbHVtbigndHlwZScsIGZ1bmN0aW9uICgkcXVlcnksICRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ3BheW1lbnRfdHlwZScsICdMSUtFJywgJyUnLiRrZXl3b3JkLiclJyk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5lZGl0Q29sdW1uKCdvcGVuaW5nX2JhbGFuY2UnLCBmdW5jdGlvbigkdmFsdWVzKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3lzdGVtTW9uZXlGb3JtYXQoJHZhbHVlcy0+b3BlbmluZ19iYWxhbmNlKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmVkaXRDb2x1bW4oJ2RlYml0JywgZnVuY3Rpb24oJHZhbHVlcyl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN5c3RlbU1vbmV5Rm9ybWF0KCR2YWx1ZXMtPmRlYml0KTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmVkaXRDb2x1bW4oJ2NyZWRpdCcsIGZ1bmN0aW9uKCR2YWx1ZXMpewogICAgICAgICAgICAgICAgICAgIHJldHVybiBzeXN0ZW1Nb25leUZvcm1hdCgkdmFsdWVzLT5jcmVkaXQpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+ZWRpdENvbHVtbignY2xvc2luZ19iYWxhbmNlJywgZnVuY3Rpb24oJHZhbHVlcyl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN5c3RlbU1vbmV5Rm9ybWF0KCR2YWx1ZXMtPmNsb3NpbmdfYmFsYW5jZSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5yYXdDb2x1bW5zKFsnZGF0ZScsJ29wZW5pbmdfYmFsYW5jZScsJ2RlYml0JywnY3JlZGl0JywnY2xvc2luZ19iYWxhbmNlJ10pCiAgICAgICAgICAgICAgICAtPm1ha2UodHJ1ZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRkYXRhID0gWwogICAgICAgICAgICAgICAgJ3RpdGxlJyA9PiAnU3VwcGxpZXIgTGVkZ2VyJywKICAgICAgICAgICAgICAgICdmcm9tX2RhdGUnID0+ICRmcm9tX2RhdGUsCiAgICAgICAgICAgICAgICAndG9fZGF0ZScgPT4gJHRvX2RhdGUsCiAgICAgICAgICAgICAgICAnc3VwcGxpZXJfaWQnID0+ICRzdXBwbGllcl9pZCwKICAgICAgICAgICAgICAgICdjaG9vc2VTdXBwbGllcnMnID0+ICRzdXBwbGllcnMsCiAgICAgICAgICAgICAgICAnc2VsZWN0ZWRfc3VwcGxpZXInID0+ICRzZWxlY3RlZF9zdXBwbGllciwKICAgICAgICAgICAgICAgICdoZWFkZXJDb2x1bW5zJyA9PiAkdGhpcy0+aGVhZGVyQ29sdW1ucygpCiAgICAgICAgICAgIF07CgogICAgICAgICAgICByZXR1cm4gdmlldygncG1zLmJhY2tlbmQucGFnZXMuYWNjb3VudHMuc3VwcGxpZXItbGVkZ2VyLWxpc3QnLCAkZGF0YSk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+YmFja1dpdGhFcnJvcigkdGgtPmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQp9Cg==