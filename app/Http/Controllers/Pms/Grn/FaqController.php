<?php
bolt_decrypt( __FILE__ , 'OI1ngb'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcUG1zXEdybjsKCnVzZSBBcHBcSHR0cFxDb250cm9sbGVyc1xDb250cm9sbGVyOwp1c2UgSWxsdW1pbmF0ZVxIdHRwXFJlcXVlc3Q7CnVzZSBBcHBcTW9kZWxzXFBtc01vZGVsc1xHcm5cRmFxOwp1c2UgQXBwXE1vZGVsc1xQbXNNb2RlbHNcQ2F0ZWdvcnk7Cgp1c2UgRGF0YVRhYmxlczsKCmNsYXNzIEZhcUNvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyCnsKICAgIHB1YmxpYyBmdW5jdGlvbiBoZWFkZXJDb2x1bW5zKCR2YWx1ZT0nJykKICAgIHsKICAgICAgICByZXR1cm4gYXJyYXkoCiAgICAgICAgICAgIFsnU0wnLCAnU0wnXSwKICAgICAgICAgICAgWydzdWJfY2F0ZWdvcnknLCAnc3ViX2NhdGVnb3J5J10sCiAgICAgICAgICAgIFsncXVhbGl0eV9pc3N1ZXMnLCAncXVhbGl0eV9pc3N1ZXMnXSwKICAgICAgICAgICAgWydhY3Rpb25zJywgJ2FjdGlvbnMnLCAndGV4dC1jZW50ZXInXQogICAgICAgICk7CiAgICB9CgogICAgLyoqCiAgICAgKiBEaXNwbGF5IGEgbGlzdGluZyBvZiB0aGUgcmVzb3VyY2UuCiAgICAgKgogICAgICogQHJldHVybiBcSWxsdW1pbmF0ZVxIdHRwXFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBpbmRleCgpCiAgICB7CiAgICAgICAgLy8gJGNhdGVnb3JpZXMgPSBDYXRlZ29yeTo6aGFzKCdjYXRlZ29yeScpLT5nZXQoKTsKICAgICAgICAvLyAkYXJyYXkgPSBbCiAgICAgICAgLy8gICAgICJXaHkgWW91IG5lZWQgdG8gcmV0dXJuIHRoaXMgcHJvZHVjdD8iLAogICAgICAgIC8vICAgICAiSXMgdGhpcyBwcm9kdWN0IGFyZSBicm9rZW4/IiwKICAgICAgICAvLyAgICAgIklzIGFueSBwcm9kdWN0IGFyZSBtaXNzaW5nPyIsCiAgICAgICAgLy8gXTsKICAgICAgICAvLyBmb3JlYWNoKCRjYXRlZ29yaWVzIGFzICRrZXkgPT4gJGNhdGVnb3J5KXsKICAgICAgICAvLyAgICAgZm9yZWFjaCgkYXJyYXkgYXMgJGtleSA9PiAkZmFxKXsKICAgICAgICAvLyAgICAgICAgIEZhcTo6Y3JlYXRlKFsKICAgICAgICAvLyAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnID0+ICRjYXRlZ29yeS0+aWQsCiAgICAgICAgLy8gICAgICAgICAgICAgJ25hbWUnID0+ICRmYXEsCiAgICAgICAgLy8gICAgICAgICBdKTsKICAgICAgICAvLyAgICAgfQogICAgICAgIC8vIH0KCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJHF1ZXN0aW9ucyA9IEZhcTo6cXVlcnkoKQogICAgICAgICAgICAtPndoZW4ocmVxdWVzdCgpLT5oYXMoJ2NhdGVnb3J5X2lkJyksIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnY2F0ZWdvcnlfaWQnLCByZXF1ZXN0KCktPmdldCgnY2F0ZWdvcnlfaWQnKSk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgJG9wdGlvbnM9WwogICAgICAgICAgICAgICAgJ2ZhcS1lZGl0Jz0+YXV0aCgpLT51c2VyKCktPmhhc1Blcm1pc3Npb25UbygnZmFxLWVkaXQnKSwKICAgICAgICAgICAgICAgICdmYXEtZGVsZXRlJz0+YXV0aCgpLT51c2VyKCktPmhhc1Blcm1pc3Npb25UbygnZmFxLWRlbGV0ZScpLAogICAgICAgICAgICBdOwoKCiAgICAgICAgICAgIGlmIChyZXF1ZXN0KCktPmFqYXgoKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIERhdGFUYWJsZXM6Om9mKCRxdWVzdGlvbnMpCiAgICAgICAgICAgICAgICAgICAgLT5hZGRJbmRleENvbHVtbigpCiAgICAgICAgICAgICAgICAgICAgLT5hZGRDb2x1bW4oJ3N1Yl9jYXRlZ29yeScsIGZ1bmN0aW9uKCRxdWVzdGlvbil7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlc3Rpb24tPmNhdGVnb3J5ID8gJHF1ZXN0aW9uLT5jYXRlZ29yeS0+bmFtZSA6ICcnOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLT5maWx0ZXJDb2x1bW4oJ3N1Yl9jYXRlZ29yeScsIGZ1bmN0aW9uICgkcXVlcnksICRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlSGFzKCdjYXRlZ29yeScsIGZ1bmN0aW9uICgkcXVlcnkpIHVzZSgka2V5d29yZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHF1ZXJ5LT53aGVyZSgnbmFtZScsICdMSUtFJywgJyUnLiRrZXl3b3JkLiclJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLT5hZGRDb2x1bW4oJ3F1YWxpdHlfaXNzdWVzJywgZnVuY3Rpb24oJHF1ZXN0aW9uKXsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVzdGlvbi0+bmFtZTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC0+ZmlsdGVyQ29sdW1uKCdxdWFsaXR5X2lzc3VlcycsIGZ1bmN0aW9uICgkcXVlcnksICRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKCduYW1lJywgJ0xJS0UnLCAnJScuJGtleXdvcmQuJyUnKTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC0+YWRkQ29sdW1uKCdhY3Rpb25zJywgZnVuY3Rpb24oJHF1ZXN0aW9uKSB1c2UoJG9wdGlvbnMpewogICAgICAgICAgICAgICAgICAgICAgICAkYWN0aW9ucz0nJzsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkb3B0aW9uc1snZmFxLWVkaXQnXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGFjdGlvbnMuPSAnPGEgY2xhc3M9ImJ0biBidG4tc20gYnRuLWluZm8gYnRuLWNpcmNsZSBteC0xIiBocmVmPSInLnVybCgnL3Btcy9yZXR1cm4tZmFxLycuJHF1ZXN0aW9uLT5pZC4nL2VkaXQnKS4nIj48aSBjbGFzcz0ibGFzIGxhLWVkaXQiPjwvaT4mbmJzcDtFZGl0PC9hPic7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkb3B0aW9uc1snZmFxLWRlbGV0ZSddKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYWN0aW9ucy49JzxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1zbSBidG4tZGFuZ2VyIGJ0bi1jaXJjbGUgbXgtMSIgb25jbGljaz0iZGVsZXRlRnJvbUNSVUQoJCh0aGlzKSkiIGRhdGEtc3JjPSInLnVybCgnL3Btcy9yZXR1cm4tZmFxLycuJHF1ZXN0aW9uLT5pZCkuJyI+PGkgY2xhc3M9ImxhcyBsYS10cmFzaCI+PC9pPiZuYnNwO0RlbGV0ZTwvYnV0dG9uPiAnOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkYWN0aW9uczsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC0+cmF3Q29sdW1ucyhbJ2FjdGlvbnMnXSkKICAgICAgICAgICAgICAgICAgICAtPnRvSnNvbigpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gdmlldygncG1zLmJhY2tlbmQucGFnZXMuZmFxLmluZGV4JywgWwogICAgICAgICAgICAgICAgJ3RpdGxlJyA9PiAiRkFRIiwKICAgICAgICAgICAgICAgICdoZWFkZXJDb2x1bW5zJyA9PiAkdGhpcy0+aGVhZGVyQ29sdW1ucygpLAogICAgICAgICAgICBdKTsKICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5iYWNrV2l0aEVycm9yKCR0aC0+Z2V0TWVzc2FnZSgpKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBTaG93IHRoZSBmb3JtIGZvciBjcmVhdGluZyBhIG5ldyByZXNvdXJjZS4KICAgICAqCiAgICAgKiBAcmV0dXJuIFxJbGx1bWluYXRlXEh0dHBcUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGNyZWF0ZSgpCiAgICB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJHRpdGxlID0gJ0NyZWF0ZSBGYXEnOwogICAgICAgICAgICByZXR1cm4gdmlldygncG1zLmJhY2tlbmQucGFnZXMuZmFxLmNyZWF0ZScsIGNvbXBhY3QoJ3RpdGxlJykpOwogICAgICAgIH1jYXRjaCAoXFRocm93YWJsZSAkdGgpewogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmJhY2tXaXRoRXJyb3IoJHRoLT5nZXRNZXNzYWdlKCkpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFN0b3JlIGEgbmV3bHkgY3JlYXRlZCByZXNvdXJjZSBpbiBzdG9yYWdlLgogICAgICoKICAgICAqIEBwYXJhbSAgXElsbHVtaW5hdGVcSHR0cFxSZXF1ZXN0ICAkcmVxdWVzdAogICAgICogQHJldHVybiBcSWxsdW1pbmF0ZVxIdHRwXFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBzdG9yZShSZXF1ZXN0ICRyZXF1ZXN0KQogICAgewogICAgICAgICRyZXF1ZXN0LT52YWxpZGF0ZShbCiAgICAgICAgICAgICdjYXRlZ29yeV9pZCcgPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgJ25hbWUnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgXSk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgICRmYXEgPSBGYXE6OmNyZWF0ZSgkcmVxdWVzdC0+YWxsKCkpOwogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmJhY2tXaXRoU3VjY2VzcygnUXVlc3Rpb24gU2F2ZWQgU3VjY2Vzc2Z1bGx5Jyk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+YmFja1dpdGhFcnJvcigkdGgtPmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogRGlzcGxheSB0aGUgc3BlY2lmaWVkIHJlc291cmNlLgogICAgICoKICAgICAqIEBwYXJhbSAgaW50ICAkaWQKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gc2hvdygkaWQpCiAgICB7CiAgICAgICAgCiAgICB9CgogICAgLyoqCiAgICAgKiBTaG93IHRoZSBmb3JtIGZvciBlZGl0aW5nIHRoZSBzcGVjaWZpZWQgcmVzb3VyY2UuCiAgICAgKgogICAgICogQHBhcmFtICBpbnQgICRpZAogICAgICogQHJldHVybiBcSWxsdW1pbmF0ZVxIdHRwXFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBlZGl0KCRpZCkKICAgIHsKICAgICAgICB0cnkgewogICAgICAgICAgICAkdGl0bGUgPSAnRWRpdCBGYXEnOwogICAgICAgICAgICAkcXVlc3Rpb24gPSBGYXE6OmZpbmRPckZhaWwoJGlkKTsKICAgICAgICAgICAgcmV0dXJuIHZpZXcoJ3Btcy5iYWNrZW5kLnBhZ2VzLmZhcS5lZGl0JywgY29tcGFjdCgndGl0bGUnLCAncXVlc3Rpb24nKSk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+YmFja1dpdGhFcnJvcigkdGgtPmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBzcGVjaWZpZWQgcmVzb3VyY2UgaW4gc3RvcmFnZS4KICAgICAqCiAgICAgKiBAcGFyYW0gIFxJbGx1bWluYXRlXEh0dHBcUmVxdWVzdCAgJHJlcXVlc3QKICAgICAqIEBwYXJhbSAgaW50ICAkaWQKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gdXBkYXRlKFJlcXVlc3QgJHJlcXVlc3QsICRpZCkKICAgIHsgICAKICAgICAgICAkcmVxdWVzdC0+dmFsaWRhdGUoWwogICAgICAgICAgICAnY2F0ZWdvcnlfaWQnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICduYW1lJyA9PiAncmVxdWlyZWQnLAogICAgICAgIF0pOwoKICAgICAgICB0cnkgewogICAgICAgICAgICAkZmFxID0gRmFxOjpmaW5kT3JGYWlsKCRpZCk7CiAgICAgICAgICAgICRmYXEtPmNhdGVnb3J5X2lkID0gJHJlcXVlc3QtPmNhdGVnb3J5X2lkOwogICAgICAgICAgICAkZmFxLT5uYW1lID0gJHJlcXVlc3QtPm5hbWU7CiAgICAgICAgICAgICRmYXEtPnNhdmUoKTsKCiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+YmFja1dpdGhTdWNjZXNzKCdRdWVzdGlvbiB1cGRhdGVkIFN1Y2Nlc3NmdWxseScpOwogICAgICAgIH1jYXRjaCAoXFRocm93YWJsZSAkdGgpewogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmJhY2tXaXRoRXJyb3IoJHRoLT5nZXRNZXNzYWdlKCkpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJlbW92ZSB0aGUgc3BlY2lmaWVkIHJlc291cmNlIGZyb20gc3RvcmFnZS4KICAgICAqCiAgICAgKiBAcGFyYW0gIGludCAgJGlkCiAgICAgKiBAcmV0dXJuIFxJbGx1bWluYXRlXEh0dHBcUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGRlc3Ryb3koJGlkKQogICAgewogICAgICAgICRmYXEgPSBGYXE6OmZpbmRPckZhaWwoJGlkKTsKICAgICAgICB0cnkgewogICAgICAgICAgICAkZmFxLT5kZWxldGUoKTsKCiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiB0cnVlCiAgICAgICAgICAgIF0pOwogICAgICAgIH1jYXRjaCAoXFRocm93YWJsZSAkdGgpewogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAnc3VjY2VzcycgPT4gZmFsc2UsCiAgICAgICAgICAgICAgICAnbWVzc2FnZScgPT4gJHRoLT5nZXRNZXNzYWdlKCkKICAgICAgICAgICAgXSk7CiAgICAgICAgfQoKICAgIH0KfQo=