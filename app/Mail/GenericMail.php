<?php
bolt_decrypt( __FILE__ , 'j4TBtX'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXE1haWw7Cgp1c2UgSWxsdW1pbmF0ZVxCdXNcUXVldWVhYmxlOwp1c2UgSWxsdW1pbmF0ZVxDb250cmFjdHNcUXVldWVcU2hvdWxkUXVldWU7CnVzZSBJbGx1bWluYXRlXE1haWxcTWFpbGFibGU7CnVzZSBJbGx1bWluYXRlXFF1ZXVlXFNlcmlhbGl6ZXNNb2RlbHM7CgpjbGFzcyBHZW5lcmljTWFpbCBleHRlbmRzIE1haWxhYmxlCnsKICAgIHVzZSBRdWV1ZWFibGUsIFNlcmlhbGl6ZXNNb2RlbHM7CgogICAgcHVibGljICR2aWV3VGVtcGxhdGU7CiAgICBwdWJsaWMgJGRhdGE7CiAgICBwdWJsaWMgJGF0dGFjaG1lbnRzOwogICAgcHVibGljICRzdWJqZWN0TGluZTsKICAgIHB1YmxpYyAkY2M7CiAgICBwdWJsaWMgJGJjYzsKCiAgICAvKioKICAgICAqIEdlbmVyaWMgTWFpbCBDb25zdHJ1Y3RvcgogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJHZpZXcgLSBCbGFkZSBvciBNYXJrZG93biB2aWV3CiAgICAgKiBAcGFyYW0gYXJyYXkgJGRhdGEgLSBEYXRhIGZvciB0aGUgdmlldwogICAgICogQHBhcmFtIHN0cmluZyAkc3ViamVjdCAtIEVtYWlsIHN1YmplY3QKICAgICAqIEBwYXJhbSBhcnJheXxzdHJpbmcgJGF0dGFjaG1lbnRzIC0gRmlsZSBwYXRoKHMpIGZvciBhdHRhY2htZW50cwogICAgICogQHBhcmFtIGFycmF5fHN0cmluZyAkY2MgLSBDQyBlbWFpbHMKICAgICAqIEBwYXJhbSBhcnJheXxzdHJpbmcgJGJjYyAtIEJDQyBlbWFpbHMKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCR2aWV3LCAkZGF0YSwgJHN1YmplY3QsICRhdHRhY2htZW50cyA9IFtdLCAkY2MgPSBbXSwgJGJjYyA9IFtdKQogICAgewogICAgICAgICR0aGlzLT52aWV3VGVtcGxhdGUgPSAkdmlldzsKICAgICAgICAkdGhpcy0+ZGF0YSA9ICRkYXRhOwogICAgICAgICR0aGlzLT5zdWJqZWN0TGluZSA9ICRzdWJqZWN0OwogICAgICAgICR0aGlzLT5hdHRhY2htZW50cyA9IGlzX2FycmF5KCRhdHRhY2htZW50cykgPyAkYXR0YWNobWVudHMgOiBbJGF0dGFjaG1lbnRzXTsKICAgICAgICAkdGhpcy0+Y2MgPSAoYXJyYXkpJGNjOwogICAgICAgICR0aGlzLT5iY2MgPSAoYXJyYXkpJGJjYzsKICAgIH0KCiAgICAvKioKICAgICAqIEJ1aWxkIHRoZSBtZXNzYWdlLgogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gYnVpbGQoKQogICAgewogICAgICAgICRtYWlsID0gJHRoaXMtPnN1YmplY3QoJHRoaXMtPnN1YmplY3RMaW5lKQogICAgICAgICAgICAtPndpdGgoJHRoaXMtPmRhdGEpOwoKICAgICAgICAvLyBJZiBCbGFkZSB2aWV3IGV4aXN0cywgdXNlIGl0LiBPdGhlcndpc2UsIGZhbGxiYWNrIHRvIE1hcmtkb3duLgogICAgICAgIGlmICh2aWV3KCktPmV4aXN0cygkdGhpcy0+dmlld1RlbXBsYXRlKSkgewogICAgICAgICAgICAkbWFpbC0+dmlldygkdGhpcy0+dmlld1RlbXBsYXRlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkbWFpbC0+bWFya2Rvd24oJHRoaXMtPnZpZXdUZW1wbGF0ZSk7CiAgICAgICAgfQoKICAgICAgICAvLyBBZGQgYXR0YWNobWVudHMKICAgICAgICAvLyBHZW5lcmF0ZSBwZGYgYW5kIGF0dGFjaAoKICAgICAgICBpZiAoIWVtcHR5KCR0aGlzLT5kYXRhWydtYWlsX2JvZHknXSkpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICRwZGYgPSBvdXRwdXRNUERGKAogICAgICAgICAgICAgICAgICAgICR0aGlzLT5kYXRhWydtYWlsX2JvZHknXSwKICAgICAgICAgICAgICAgICAgICAkdGhpcy0+ZGF0YSwKICAgICAgICAgICAgICAgICAgICAkdGhpcy0+c3ViamVjdExpbmUsCiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPnN1YmplY3RMaW5lCiAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgICRmaWxlTmFtZSA9ICR0aGlzLT5kYXRhWydyZWZlcmVuY2Vfbm8nXSA/PyB1bmlxaWQoJ2F0dGFjaG1lbnRfJyk7CgogICAgICAgICAgICAgICAgJG1haWwtPmF0dGFjaERhdGEoCiAgICAgICAgICAgICAgICAgICAgJHBkZiwKICAgICAgICAgICAgICAgICAgICAkZmlsZU5hbWUgLiAiLnBkZiIsCiAgICAgICAgICAgICAgICAgICAgWydtaW1lJyA9PiAnYXBwbGljYXRpb24vcGRmJ10KICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICAgLy9cTG9nOjppbmZvKCJQREYgZ2VuZXJhdGlvbiBzdWNjZXNzIGZvciBtYWlsIFt7JHRoaXMtPnN1YmplY3RMaW5lfV06IHskdGhpcy0+ZGF0YVsnZW1haWwnXX0iKTsKCiAgICAgICAgICAgIH0gY2F0Y2ggKFxUaHJvd2FibGUgJGUpIHsKICAgICAgICAgICAgICAgIFxMb2c6OmVycm9yKCJQREYgZ2VuZXJhdGlvbiBmYWlsZWQgZm9yIG1haWwgW3skdGhpcy0+c3ViamVjdExpbmV9XTogIiAuICRlLT5nZXRNZXNzYWdlKCkpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmb3JlYWNoICgkdGhpcy0+YXR0YWNobWVudHMgYXMgJGZpbGUpIHsKICAgICAgICAgICAgaWYgKGlzX3N0cmluZygkZmlsZSkgJiYgZmlsZV9leGlzdHMoJGZpbGUpKSB7CiAgICAgICAgICAgICAgICAvLyBJZiBpdCdzIGEgdmFsaWQgZmlsZSBwYXRoCiAgICAgICAgICAgICAgICAkbWFpbC0+YXR0YWNoKCRmaWxlLCBbCiAgICAgICAgICAgICAgICAgICAgJ2FzJyA9PiAkdGhpcy0+ZGF0YVsncmVmZXJlbmNlX25vJ10gLiAnLicgLiBwYXRoaW5mbygkZmlsZSwgUEFUSElORk9fRVhURU5TSU9OKSwKICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICB9IGVsc2VpZiAoaXNfYXJyYXkoJGZpbGUpICYmIGlzc2V0KCRmaWxlWydkYXRhJ10pKSB7CiAgICAgICAgICAgICAgICAkbWFpbC0+YXR0YWNoRGF0YSgKICAgICAgICAgICAgICAgICAgICAkZmlsZVsnZGF0YSddLAogICAgICAgICAgICAgICAgICAgICRmaWxlWyduYW1lJ10gPz8gKCR0aGlzLT5kYXRhWydyZWZlcmVuY2Vfbm8nXSAuICIucGRmIiksCiAgICAgICAgICAgICAgICAgICAgWydtaW1lJyA9PiAkZmlsZVsnbWltZSddID8/ICdhcHBsaWNhdGlvbi9wZGYnXQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCgogICAgICAgIC8vIEFkZCBDQyBhbmQgQkNDCiAgICAgICAgaWYgKCFlbXB0eSgkdGhpcy0+Y2MpKSB7CiAgICAgICAgICAgICRtYWlsLT5jYygkdGhpcy0+Y2MpOwogICAgICAgIH0KICAgICAgICBpZiAoIWVtcHR5KCR0aGlzLT5iY2MpKSB7CiAgICAgICAgICAgICRtYWlsLT5iY2MoJHRoaXMtPmJjYyk7CiAgICAgICAgfQogICAgICAgIC8vXExvZzo6aW5mbygiRS1NYWlsIHNlbmQgc3VjY2VzcyBmb3IgbWFpbCBbeyR0aGlzLT5zdWJqZWN0TGluZX1dOiAiKTsKICAgICAgICByZXR1cm4gJG1haWw7CiAgICB9Cn0K